<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>SDJ Online Support</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .fade-out {
      opacity: 0;
      transition: opacity 1s ease;
    }

    /* Loader animation */
    .loader {
      border: 4px solid rgba(255, 255, 255, 0.3);
      border-top-color: white;
      border-radius: 50%;
      width: 48px;
      height: 48px;
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    /* Pulse glow for Reset System button */
    .pulse-glow {
      animation: pulse 2s infinite;
      box-shadow: 0 0 20px rgba(255, 0, 0, 0.6);
    }

    @keyframes pulse {
      0%, 100% { box-shadow: 0 0 15px rgba(255, 0, 0, 0.6); }
      50% { box-shadow: 0 0 30px rgba(255, 0, 0, 0.9); }
    }
  </style>
</head>
<body class="bg-gradient-to-br from-orange-500 to-yellow-400 flex flex-col min-h-screen text-white">

  <!-- Header -->
  <header class="text-center py-10">
    <h1 class="text-5xl font-bold drop-shadow-md">SDJ Online Support</h1>
    <p class="text-lg mt-3 opacity-80">Your trusted help center</p>
  </header>

  <!-- Main Content -->
  <main class="flex-grow flex items-center justify-center">
    <div id="mainContainer" class="bg-white/10 backdrop-blur-lg rounded-2xl shadow-xl p-10 text-center w-11/12 md:w-1/2">
      <h2 class="text-2xl font-semibold mb-6">Welcome to SDJ Support Portal</h2>
      <div class="flex flex-col gap-4">
        <button id="loginBtn" class="bg-white text-orange-600 font-semibold py-3 rounded-xl hover:bg-orange-100 transition">
          Support Login
        </button>
        <button id="chatBtn" class="bg-orange-700 font-semibold py-3 rounded-xl hover:bg-orange-800 transition">
          Online Support
        </button>
      </div>
    </div>
  </main>

  <!-- Footer -->
  <footer class="text-center py-6 text-sm bg-black/30 mt-auto">
    <p>Powered by <span class="font-semibold">Dev Studios</span></p>
    <p>Â© 2025 Dev Studios. All rights reserved.</p>
  </footer>

  <script>
    const container = document.getElementById("mainContainer");
    const loginBtn = document.getElementById("loginBtn");
    const chatBtn = document.getElementById("chatBtn");

    // LOGIN SECTION
    loginBtn.addEventListener("click", () => {
      container.innerHTML = `
        <h2 class="text-2xl font-semibold mb-6">Support Login</h2>
        <input id="username" type="text" placeholder="Username" class="w-full p-3 rounded-lg text-black mb-3">
        <input id="password" type="password" placeholder="Password" class="w-full p-3 rounded-lg text-black mb-3">
        <button id="submitLogin" class="bg-white text-orange-600 font-semibold py-3 rounded-xl hover:bg-orange-100 transition w-full">Login</button>
        <button id="cancelLogin" class="bg-gray-700 text-white font-semibold py-3 rounded-xl hover:bg-gray-800 transition w-full mt-3">Cancel</button>
      `;

      document.getElementById("cancelLogin").onclick = () => location.reload();

      document.getElementById("submitLogin").onclick = () => {
        const username = document.getElementById("username").value;
        const password = document.getElementById("password").value;

        if (password === "SDJSupport10") {
          container.innerHTML = `
            <div class="flex flex-col items-center">
              <div class="loader mb-4"></div>
              <p class="text-xl font-semibold">Logging in...</p>
            </div>
          `;

          setTimeout(() => {
            container.innerHTML = `<p class="text-xl font-semibold">Successfully Logged in. Welcome ${username}!</p>`;
            
            setTimeout(() => {
              container.classList.add("fade-out");
              setTimeout(() => {
                container.innerHTML = `
                  <h2 class="text-2xl font-semibold mb-6">System Maintenance</h2>
                  <p class="mb-4">You can reset the system to clear all chat data and refresh the platform.</p>
                  <button id="resetBtn" class="bg-red-600 pulse-glow font-semibold py-3 rounded-xl hover:bg-red-700 transition w-full">Reset System</button>
                `;
                container.classList.remove("fade-out");
                
                document.getElementById("resetBtn").onclick = () => {
                  localStorage.clear();
                  alert("System Reset Successful. Reloading...");
                  location.reload();
                };
              }, 1000);
            }, 5000);
          }, 2000);
        } else {
          alert("Incorrect password!");
        }
      };
    });

    // CHAT SECTION
    chatBtn.addEventListener("click", () => {
      const userId = Math.floor(Math.random() * 100000);
      const userName = "player" + userId;

      container.innerHTML = `
        <div class="text-left w-full h-[400px] flex flex-col">
          <div id="chatBox" class="flex-grow bg-white/20 rounded-lg p-3 overflow-y-auto mb-3"></div>
          <div class="flex">
            <input id="chatInput" type="text" placeholder="Type your message..." class="flex-grow p-3 rounded-l-lg text-black">
            <button id="sendBtn" class="bg-orange-700 px-5 rounded-r-lg hover:bg-orange-800 transition">Send</button>
          </div>
        </div>
      `;

      const chatBox = document.getElementById("chatBox");
      const input = document.getElementById("chatInput");
      const sendBtn = document.getElementById("sendBtn");

      let messageCount = 0;

      // Wipe local storage every 24 hours
      const lastWipe = localStorage.getItem("lastWipe");
      if (!lastWipe || Date.now() - lastWipe > 86400000) {
        localStorage.clear();
        localStorage.setItem("lastWipe", Date.now());
      }

      sendBtn.onclick = () => {
        const text = input.value.trim();
        if (!text) return;
        chatBox.innerHTML += `<p><strong>${userName}:</strong> ${text}</p>`;
        input.value = "";
        chatBox.scrollTop = chatBox.scrollHeight;

        messageCount++;
        if (messageCount === 1) {
          setTimeout(() => {
            chatBox.innerHTML += `<p><strong>SDJ Automations:</strong> Greetings! Welcome to SDJ Online Support Portal, I am SDJ Automations. To make it easier for our staff members to know who you are please state your Roblox username, and your Discord username if you have Discord.</p>`;
            chatBox.scrollTop = chatBox.scrollHeight;
          }, 1000);
        } else if (messageCount === 2) {
          setTimeout(() => {
            chatBox.innerHTML += `<p><strong>SDJ Automations:</strong> Thank you for understanding. Please note our staff members are usually busy, so please cope with us! A staff member will be with you soon.</p>`;
            chatBox.scrollTop = chatBox.scrollHeight;
          }, 1000);
        }
      };
    });
  </script>

</body>
</html>
